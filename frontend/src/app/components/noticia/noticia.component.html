<div class="noticia-container" *ngIf="noticia">
    <article class="noticia-content">
        <header class="noticia-header">
            <h1 class="noticia-titulo">{{noticia[0].titulo}}</h1>
            <time class="noticia-fecha">{{noticia[0].fecha | date:'longDate'}}</time>
            <div *ngIf="globals.activo == true" class="noticia-actions">
                <a (click)="editNoticia(noticia[0])" class="btn-action btn-edit">
                    <i class="glyphicon glyphicon-pencil"></i> Editar
                </a>
                <a (click)="deleteNoticia(noticia[0].id)" class="btn-action btn-delete">
                    <i class="glyphicon glyphicon-remove"></i> Eliminar
                </a>
            </div>
        </header>
        
        <figure class="noticia-imagen">
            <img [src]="getNoticiaImageUrl(noticia[0].imagen)" [alt]="noticia[0].titulo">
        </figure>
        
        <div class="noticia-cuerpo">
            <p>{{noticia[0].cuerpo}}</p>
        </div>
    </article>
</div>

<div *ngIf="globals.activo == true && noticiasService.selectedNoticia.id" class="form-container">
    <h4 class="form-title">Editar noticia</h4>
    <form role="form" #noticiasForm="ngForm">
        <input type="hidden" name="id" [(ngModel)]="noticiasService.selectedNoticia.id" #id="ngModel">
        <div class="form-row">
            <div class="form-group">
                <label for="Titulo">Título</label>
                <input type="text" class="form-control" name="titulo" [(ngModel)]="noticiasService.selectedNoticia.titulo" #titulo="ngModel" required placeholder="Título">
            </div>
            <div class="form-group">
                <label for="Fecha">Fecha</label>
                <input type="date" class="form-control" name="fecha" [(ngModel)]="noticiasService.selectedNoticia.fecha" #fecha="ngModel" required placeholder="Fecha">
            </div>
        </div>
        <div class="form-group">
            <label for="Cuerpo">Cuerpo</label>
            <textarea class="form-control" name="cuerpo" [(ngModel)]="noticiasService.selectedNoticia.cuerpo" #cuerpo="ngModel" required placeholder="Cuerpo" rows="4"></textarea>
        </div>
        <div class="form-group">
            <label for="imagen">Imagen</label>
            <input type="file" class="form-control" name="imagen" (change)="onImageSelected($event)">
            <img *ngIf="previewUrl" [src]="previewUrl" class="img-preview">
        </div>
        <div class="form-actions">
            <button type="submit" class="btn btn-primary" (click)="updateNoticia(noticiasForm)">Enviar</button>
            <button type="button" class="btn btn-default" (click)="resetForm(noticiasForm)">Limpiar</button>
        </div>
    </form>
</div>
